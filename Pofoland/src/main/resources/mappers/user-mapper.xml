<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE mapper
	PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
	"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.hst.pofoland.biz.user.dao.UserDAO">

	<insert id="insertUser" keyProperty="userSeq">
		INSERT INTO User (
			USER_ID,
			USER_PW,
			USER_NICK,
			USER_EMAIL,
			USER_AUTH_KEY
		) VALUES (
			#{userId},
			#{userPw},
			#{userNick},
			#{userEmail},
			#{userAuthKey}
		)
		<selectKey keyProperty="userSeq" resultType="int">
			SELECT LAST_INSERT_ID();
		</selectKey>
	</insert>
	
	<select id="selectUserLogin" resultType="UserVO">
		SELECT USER_SEQ,
			   USER_ID,
			   USER_PW,
			   USER_EMAIL,
			   USER_NICK,
			   USER_AUTH_YN,
			   USER_SCORE,
			   date_format(USER_REG_DT,'%Y-%m-%d %T'),
			   USER_DEL_YN,
			   USER_LOGIN_YN
		  FROM User
		 WHERE USER_ID = #{userId} 
	</select>
	
	
	<select id="selectDuplicateCheckId" resultType="String">
		SELECT USER_ID
		  FROM User
		 WHERE USER_ID = #{userId}
	</select>
	
	<select id="selectDuplicateCheckNick" resultType="String">
		SELECT USER_NICK
		  FROM User
		 WHERE USER_NICK = #{userNick}
	</select>
	
	<select id="selectUserInfo" resultType="UserVO">
		SELECT USER_SEQ,
			   USER_ID,
			   USER_PW,
			   USER_EMAIL,
			   USER_NICK,
			   USER_AUTH_YN,
			   USER_SCORE,
			   date_format(USER_REG_DT,'%Y-%m-%d %T'),
			   USER_DEL_YN,
			   USER_LOGIN_YN
		  FROM User
		 WHERE USER_SEQ = #{userSeq}
		  
	</select>

</mapper>